define("modules/clean/business/analytics",["require","exports","modules/clean/analytics"],function(t,e,n){"use strict";var i=function(){function t(t){var e=this;this.tracker=function(t){return e.trackScrolling(t)},this.key=t.key,this.topOffsetTrigger=t.top_offset_trigger||200,window.addEventListener("scroll",this.tracker,!0)}return t.prototype.trackScrolling=function(t){window.scrollY>this.topOffsetTrigger&&(n.TeamsWebActionsLogger.log(this.key),window.removeEventListener("scroll",this.tracker,!0))},t}();e.ScrollTracker=i}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};define("modules/clean/business/components/business_comparison_matrix",["jquery","external/underscore"],function(n,i){var o;return o=function(){function o(e){this.handleChange=t(this.handleChange,this),this.isSticky=!1,this.$window=n(window),this.$compareTable=n(e),this.$lastHeader=this.$compareTable.find('[class*="breakdown__header"]').last(),this.$stickyHeader=this.$compareTable.find("thead"),this.$spacer=n(".mast-head-spacer"),this.$window.on("scroll",this.handleChange),this.$window.on("resize",i.throttle(this.handleChange,25)),n(this.handleChange)}return o.prototype.handleChange=function(t){var n,i,o,s,r,a,l;return!t&&e.call(window,"requestAnimationFrame")>=0?window.requestAnimationFrame(function(t){return function(){return t.handleChange(!0)}}(this)):(s=this.$spacer.height(),n=this.$stickyHeader.outerHeight(),l=this.$window.scrollTop(),o=this.$compareTable.position().top-l-s,i=this.$lastHeader.position().top-l-n-s+8,0>o?i>0&&(this.isSticky=!0,this.$compareTable.addClass("sticky"),a=Math.min(-o,this.$compareTable.height()-n),r="translateY("+a+"px)"):(this.isSticky=!1,r="translateY(0)",this.$compareTable.removeClass("sticky")),this.$stickyHeader.css({transform:r,"-webkit-transform":r,"-ms-transform":r}))},o}()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/business/components/faq_list",["jquery"],function(e){var n;return n=function(){function n(n){this._push_state=t(this._push_state,this),this._init=t(this._init,this),this.highlight_faq_item=t(this.highlight_faq_item,this),this._get_current_hash=t(this._get_current_hash,this);var i;this.window=n,this.$window=e(this.window),this._init(),i=this._get_current_hash(),i&&this.highlight_faq_item(i)}var i,o,s;return o="highlighted-flash",i="highlighted",s=50,n.prototype._get_current_hash=function(){var t;return null!=(t=this.window.location.hash)?t.split("#")[1]:void 0},n.prototype.highlight_faq_item=function(t){var n;return e("[data-faq-item]").removeClass(i+" "+o),t?(n=e("[data-faq-item='"+t+"']"),n.addClass(o),setTimeout(function(){return n.removeClass(o)},300),setTimeout(function(){return n.addClass(o),n.removeClass(o),n.addClass(i)},600)):void 0},n.prototype.scroll_to_hash_loc=function(t){var n,i;return t&&(n=e("[data-faq-item='"+t+"']"),n.size())?(i=e("header").height()+s,e("body").animate({scrollTop:n.offset().top-i},0,"linear",function(){return window.location.hash=t})):void 0},n.prototype._init=function(){return e(".business-faq-list__toc .business-faq-list__toc-item").on("click",function(t){return function(n){var i,o;return i=null!=(o=e(n.target).attr("href"))?o.split("#")[1]:void 0,n.preventDefault(),t._push_state(i),t.scroll_to_hash_loc(i),!0}}(this)),this.$window.on("hashchange",function(t){return function(){return t.highlight_faq_item(t._get_current_hash())}}(this))},n.prototype._push_state=function(t){var e,n;if(t!==this._get_current_hash())return(null!=(n=this.window.history)?n.pushState:void 0)?(e=this.window.location.pathname.split("/").slice(-1)[0],this.window.history.pushState(null,null,e+"#"+t)):this.window.location.hash=t},n}()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/business/components/hamburger_nav",["jquery"],function(e){var n;return n=function(){function n(n){this._toggleAnimateClass=t(this._toggleAnimateClass,this),this._closeAnimate=t(this._closeAnimate,this),this._openAnimate=t(this._openAnimate,this),this.$window=e(window),this.hamburger_class="."+n,this.$hamburger_container=e(this.hamburger_class+"__container"),this.$hamburger_icon=e(this.hamburger_class+"__buns"),this.animate_class=this.$hamburger_icon.data("animate"),this.hamburger_open=!1,this._events()}return n.prototype._events=function(){return this.animate_class?(this.$hamburger_container.on("click",this._toggleAnimateClass),this.$hamburger_container.on("hamburger.close_animate",this._closeAnimate),this.$hamburger_container.on("hamburger.open_animate",this._openAnimate)):void 0},n.prototype._openAnimate=function(){return this.$hamburger_icon.addClass(this.animate_class)},n.prototype._closeAnimate=function(){return this.$hamburger_icon.removeClass(this.animate_class)},n.prototype._toggleAnimateClass=function(t){return t.preventDefault(),this.hamburger_open?(this._closeAnimate(),this.$hamburger_icon.trigger({type:"hamburger.mobile_toggle",action:"close"}),this.hamburger_open=!1):(this._openAnimate(),this.$hamburger_icon.trigger({type:"hamburger.mobile_toggle",action:"open"}),this.hamburger_open=!0)},n}()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/business/components/pricing_toggle",["jquery","modules/clean/analytics","modules/core/cookies"],function(e,n,i){var o,s;return s=n.TeamsWebActionsLogger,o=function(){function n(n,i,o,s,r,a){this.selected=n,this.pricing_toggle_cookie=s,this.pricing_toggle_monthly=r,this.pricing_toggle_annual=a,this.handleAnnualToggle=t(this.handleAnnualToggle,this),this.handleMonthlyToggle=t(this.handleMonthlyToggle,this),this.prices=e(i),this.$monthlyToggle=e(o+" .toggles__toggle--monthly"),this.$annualToggle=e(o+" .toggles__toggle--annual"),this.$allMonthlyToggles=e(".toggles__toggle--monthly"),this.$allAnnualToggles=e(".toggles__toggle--annual"),this.$monthlyToggle.on("click change",this.handleMonthlyToggle),this.$annualToggle.on("click change",this.handleAnnualToggle)}return n.prototype.handleMonthlyToggle=function(){return"monthly"!==this.selected?(this.selected="monthly",i.create(this.pricing_toggle_cookie,this.pricing_toggle_monthly),s.log("click_pricing_toggle_monthly"),this.$allMonthlyToggles.addClass("toggles__toggle--selected"),this.$allMonthlyToggles.prop("checked",!0),this.$allAnnualToggles.removeClass("toggles__toggle--selected"),this.prices.each(function(){var t;return t=e(this),t.html(t.attr("data-monthly"))})):void 0},n.prototype.handleAnnualToggle=function(){return"annual"!==this.selected?(this.selected="annual",i.create(this.pricing_toggle_cookie,this.pricing_toggle_annual),s.log("click_pricing_toggle_annual"),this.$allAnnualToggles.addClass("toggles__toggle--selected"),this.$allAnnualToggles.prop("checked",!0),this.$allMonthlyToggles.removeClass("toggles__toggle--selected"),this.prices.each(function(){var t;return t=e(this),t.html(t.attr("data-annual-by-month"))})):void 0},n}()})}.call(this),function(){define("modules/clean/business/components/snap_engage_link",["jquery","modules/clean/snapengage"],function(t,e){var n;return n=function(){function t(t,e){this.$root=t,this.options=e,this.$root.on("click",function(t){return function(e){return t._snapLinkClicked(e,t.options.chatType)}}(this))}return t.prototype._snapLinkClicked=function(t,n){return t.preventDefault(),"support"===n?e.DropboxSnapEngage.startSupportChat():e.DropboxSnapEngage.startReactiveChat()},t}()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/business/computer_carousel",["jquery","external/underscore"],function(e,n){var i,o,s;return s=function(){var t,e,n;e=void 0,t=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(e=e,void 0!==t.style[e])return n[e]},o=s(),i=function(){function i(i,o){this.resizeCarouselHeight=t(this.resizeCarouselHeight,this),this.handleArrowClick=t(this.handleArrowClick,this),this.handleBulletClick=t(this.handleBulletClick,this);var r;this.$window=e(window),this.$carousel=e(i),this.$imageList=this.$carousel.find(".image-list"),this.$imageListLength=this.$carousel.find(".image-item").length,this.$copyList=this.$carousel.find(".copy-list"),this.$copyListLength=this.$carousel.find(".copy-item").length,this.$bulletList=this.$carousel.find(".bullet-list"),this.$bullets=this.$carousel.find(".bullet"),this.currentItem=0,this.changeActiveElement=n.throttle(s.bind(this),1e3),this.gradientMap=o||["orange","blue","yellow"],e(document).ready(function(){return this.resizeCarouselHeight}),r=n.debounce(this.resizeCarouselHeight,500),this.$window.resize(r),e(".benefits-carousel__arrow",this.$carousel).on("click",this.handleArrowClick),this.$bullets.on("click",function(t){return function(n){return t.handleBulletClick(e(n.target))}}(this))}var s;return i.prototype.handleBulletClick=function(t){var n;return n=t.attr("data-index"),this.currentIndex=e(".active").attr("data-index"),this.changeActiveElement(n)},i.prototype.handleArrowClick=function(t){var n,i;return t.preventDefault(),i=this.$bullets.length,this.currentIndex=Number(e(".active").attr("data-index")),n=this.currentIndex===i-1?0:this.currentIndex+1,this.changeActiveElement(n)},i.prototype.resizeCarouselHeight=function(){var t;return t=0,e(".benefits-carousel__copy-item").each(function(){return e(this).height()>t?t=e(this).height():void 0}),this.$copyList.height(t)},i.prototype.translateX=function(t,e){return t.css({"-webkit-transform":e,"-ms-transform":e,transform:e})},s=function(t){var n,i;return this.currentIndex!==t?(n=!1,i=!1,this.$carousel.find(".active").removeClass("active"),e(".benefits-carousel__copy-item").one(o,function(e){return function(i){var o,s;return"opacity"===i.originalEvent.propertyName&&n===!1?(n=!0,o=t<=e.$copyListLength-1?t/e.$copyListLength*100:0,s="translateX(-"+o+"%)",e.translateX(e.$copyList,s),e.$copyList.find("[data-index="+t+"]").addClass("active")):void 0}}(this)),e(".benefits-carousel__image-item").one(o,function(e){return function(n){var o,s;return"opacity"===n.originalEvent.propertyName&&i===!1?(i=!0,o=t<=e.$imageListLength-1?t/e.$imageListLength*100:0,s="translateX(-"+o+"%)",e.translateX(e.$imageList,s),e.$imageList.find("[data-index="+t+"]").addClass("active")):void 0}}(this)),e(".benefits-carousel__gradient").removeClass("benefits-carousel__gradient--"+this.gradientMap[this.currentIndex]),e(".benefits-carousel__gradient").addClass("benefits-carousel__gradient--"+this.gradientMap[t]),this.$bulletList.find("[data-index="+t+"]").addClass("active"),this.currentItem=t):void 0},i}()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/business/homepage_2015_header_bar",["jquery","external/modernizr","external/underscore","modules/clean/analytics","modules/core/browser"],function(e,n,i,o,s){var r,a;return a=o.TeamsWebActionsLogger,r=function(){function o(){this._toggleNavMobile=t(this._toggleNavMobile,this),this._blurDropdownMenu=t(this._blurDropdownMenu,this),this._closeAllDropdownMenus=t(this._closeAllDropdownMenus,this),this._closeDropdownMenu=t(this._closeDropdownMenu,this),this._openDropdownMenu=t(this._openDropdownMenu,this),this._isDropdownMenuOpen=t(this._isDropdownMenuOpen,this),this._toggleDropdownMenu=t(this._toggleDropdownMenu,this),this._onScrollHandler=t(this._onScrollHandler,this),this.$window=e(window),this.$nav_list_container=e(".mast-head__nav-list-container"),this.$mobile_nav_icon=e(".mast-head__mobile-nav"),this.$mobile_overlay=e(".mast-head__mobile-overlay"),this.nav_list_items=e(".mast-head__list-item").length,this.$nav_list=e(".mast-head__nav-list"),this.$links=e(".mast-head__text-link"),this.$button_try=e(".mast-head__list-item-try .button-secondary"),this.$button_sign=e(".mast-head__list-item-sign-in .button-secondary"),e(".mast-head a[data-event-type='teams']").click(this._onClickTrackingLink),this._onScrollHandler(),this.dropdown_mobile_open=!1,this.scrollThreshold=350,this.$window.scroll(i.throttle(this._onScrollHandler,33,{leading:!0,trailing:!0})),e(".mast-head__list-item-children > a").each(function(t){return function(n,i){var o,s;return o=e(i),s=o.hasClass("mast-head__text-link_subnav--hover-trigger")&&t.$window.width()>767,s?function(){var e,n,s;return"#"===o.attr("href")&&o.on("click",function(t){return t.preventDefault()}),e=o.next(),s=null,n=function(e){return s=setTimeout(t._blurDropdownMenu.bind(t,e,i),333)},o.on("mouseenter",function(e){return clearTimeout(s),t._isDropdownMenuOpen(i)?void 0:t._toggleDropdownMenu(e)}),o.on("mouseleave",n),e.on("mouseenter",function(t){return clearTimeout(s)}),e.on("mouseleave",n)}():o.on("click",t._toggleDropdownMenu)}}(this)),this._mobileNavEvents(),this._resizeNav()}return o.prototype._onScrollHandler=function(){return this.$window.scrollTop()>this.scrollThreshold?(this.$links.addClass("scrolled"),this.$button_try.addClass("scrolled"),this.$button_sign.removeClass("scrolled")):(this.$links.removeClass("scrolled"),this.$button_try.removeClass("scrolled"),this.$button_sign.addClass("scrolled")),this._closeDropdownMenu(".mast-head__list-sub-items")},o.prototype._resizeNav=function(){var t,o;if(!this.resized)return n.flexbox?void(this.resized=!0):window.outerWidth<768?void this.$window.on("resize",i.debounce(this._resizeNav,100)):(this.$window.off("resize",this._resizeNav),e(".mast-head__list-item").css("max-width",""),o=0,t=[],e(".mast-head__list-item").each(function(){var n,i;return n=e(this),i=n.outerWidth(),o+=i,t.push(function(t){var e;return e=i/t*100,n.css("max-width",e+"%")})}),e.each(t,function(t,e){return e(o)}))},o.prototype._toggleDropdownMenu=function(t){return t.preventDefault(),t.stopPropagation(),e(this).find(".mast-head__list-sub-items").on("click",function(t){return t.stopPropagation()}),this._isDropdownMenuOpen(t.target)?this._closeDropdownMenu(t.target):(this._closeAllDropdownMenus(),this._openDropdownMenu(t.target)),!1},o.prototype._isDropdownMenuOpen=function(t){return e(t).parent().hasClass("show-list-sub-items")},o.prototype._openDropdownMenu=function(t){return e(t).parent().addClass("show-list-sub-items"),e("body").one("click",this._blurDropdownMenu)},o.prototype._closeDropdownMenu=function(t){return e(t).parent().removeClass("show-list-sub-items"),e("body").off("click",this._blurDropdownMenu)},o.prototype._closeAllDropdownMenus=function(){return e(".mast-head__list-item-children.show-list-sub-items").removeClass("show-list-sub-items")},o.prototype._blurDropdownMenu=function(t,n){return 0===e(".mast-head__list-sub-items").has(t.target).length?this._closeDropdownMenu(n||".mast-head__list-sub-items"):void 0},o.prototype._closeMobileNav=function(){return this.$nav_list_container.css("max-height",""),this.$mobile_overlay.fadeOut(),this.$mobile_nav_icon.trigger("hamburger.close_animate"),this.dropdown_mobile_open=!1},o.prototype._openMobileNav=function(){return this.$nav_list_container.css("max-height",2*this.$nav_list.outerHeight(!0)),this.$mobile_overlay.fadeIn(),this.$mobile_nav_icon.trigger("hamburger.open_animate"),this.dropdown_mobile_open=!0},o.prototype._toggleNavMobile=function(t){return t.preventDefault(),"resize"!==t.type?this.dropdown_mobile_open?this._closeMobileNav():this._openMobileNav():window.outerWidth>768&&this.dropdown_mobile_open?this._closeMobileNav():void 0},o.prototype._mobileNavEvents=function(){return this.$mobile_nav_icon.on("hamburger.mobile_toggle",this._toggleNavMobile),this.$mobile_overlay.on("click",this._toggleNavMobile),this.$window.on("resize",i.debounce(this._toggleNavMobile,100))},o.prototype._onClickTrackingLink=function(t){var n,i,o;return n=e(t.target),o=n.attr("href"),i=n.attr("data-event-name"),t.preventDefault(),a.log(i,void 0,function(){return"#"!==o.substr(0,1)?s.redirect(o):void 0})},o}()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/business/landing",["jquery","modules/clean/analytics","modules/core/browser","modules/clean/dbmodal"],function(e,n,i,o){var s;return s=function(){function s(n){this._onClickTrackingLink=t(this._onClickTrackingLink,this),this._moveBackground=t(this._moveBackground,this);var i;this.$landing_header=e(".business-landing.business-header"),this.starting_position=parseInt(this.$landing_header.css("background-position-y")),this.$window=e(window),this.$window.on("scroll",this._moveBackground),n&&(i=new o.DBModal({element_id:"business-plans-modal",restrict_width:!0,preloaded:!0}),i.vertical_offset=100,i.show()),e("#business-plans-modal a[data-event-table='web_teams']").click(this._onClickTrackingLink)}return s.prototype._moveBackground=function(t){var e,n;return n=this.$window.scrollTop(),e=this.starting_position+.55*n,this.$landing_header.css("background-position-y",e+"px")},s.prototype._onClickTrackingLink=function(t){var o,s;return t.preventDefault(),o=e(t.target),s=o.attr("data-event-name"),n.TeamsWebActionsLogger.log(s,void 0,function(){return i.redirect(o.attr("href"))})},s}()})}.call(this),function(){define("modules/clean/business/product_tour",["jquery","modules/clean/analytics"],function(t,e){var n;return n=function(){function n(){t(".page-header__video").on("click",function(){return e.TeamsWebActionsLogger.log("click_business_tour_video")})}return n}()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/business/scroll_logger_cpc",["jquery","modules/clean/analytics"],function(e,n){var i,o;return o=n.TeamsWebActionsLogger,i=function(){function n(){this.handleMouse=t(this.handleMouse,this),this.handleScroll=t(this.handleScroll,this),this.enableScrollTracking=!1,this.scrollDistance=0,this.scrollingLogged=!1,this.document=e(document),this.pageHeight=this.document.height(),this.topLoggingHeight=450,this.mouseDistanceHorizontal=.35*this.document.width(),this.mouseDistanceVertical=50,this.document.on("scroll",this.handleScroll)}return n.prototype.handleScroll=function(){return this.scrollDistance=this.document.scrollTop(),this.scrollDistance>=this.pageHeight/2&&this.enableScrollTracking===!1&&(this.enableScrollTracking=!0),this.enableScrollTracking===!0&&this.scrollDistance<=this.topLoggingHeight&&this.scrollingLogged===!1?(this.scrollingLogged=!0,o.log("scroll",{sem:!0,path:location.pathname,direction:"up"}),this.document.on("mousemove",this.handleMouse)):void 0},n.prototype.handleMouse=function(t){var e,n;return e=t.pageX,n=t.pageY-this.scrollDistance,e<=this.mouseDistanceHorizontal&&n<=this.mouseDistanceVertical?(this.document.off("mousemove",this.handleMouse),o.log("mouse_move",{sem:!0,path:location.pathname,direction:"up"})):void 0},n}(),{ScrollLoggerCPC:i}})}.call(this),function(){define("modules/clean/gifting",["jquery","modules/clean/account/email","modules/clean/account/email_verify_reasons","modules/clean/ajax","modules/clean/viewer"],function(t,e,n,i,o){var s,r;return s={initGiftingPage:function(t,i){var s,r;return t?(s=o.get_viewer().get_user_by_id(i),e.EmailVerification.set_reason(n.GIFT_BUY),r=e.EmailVerification.get_for_user(s),r.verified_or_show(null)):void 0}},r={listenNotifyCTA:function(){return t(".gifting-cta__button").on("click",this.notifyNonENUser)},notifyNonENUser:function(e){var n;return n=t(e.target),n.attr("disabled","disabled"),i.WebRequest({url:"/gift/ajax_notify_non_us_user",success:function(){var e,i,o;return e=t(".notification-container"),i=e.find(".gifting-signedin-message"),o=e.find(".gifting-thankyou-message"),e.height(e.height()),n.fadeOut(400),i.fadeOut(400,function(){return o.fadeIn()})},error:function(){return n.removeAttr("disabled")}}),!1}},{Gifting:s,GiftingLandingPage:r}})}.call(this),function(){define("modules/clean/legacy_pyxl_controllers/accordion",["jquery"],function(t){var e;return e=function(){function e(e){var n;e||t(".accordion-list__item").eq(0).addClass("active"),t(".accordion-list__item").on("click",function(e){return t(this).addClass("active").siblings().removeClass("active")}),t(".accordion-list__item--closeable .accordion-list__heading").on("click",function(e){var n;return n=t(this).parent(),n.hasClass("active")?(n.removeClass("active"),e.stopPropagation()):void 0}),window.location.hash&&(n=window.location.hash,t("html, body").animate({scrollTop:t(n).offset().top-100},600),this._open_accordion(n))}return e.prototype._open_accordion=function(e){return t(e).addClass("active").data("accordion-toggle","open").siblings().data("accordion-toggle","closed").removeClass("active")},e.prototype._close_accordion=function(e){return t(e).removeClass("active")},e}()})}.call(this),function(){define("modules/clean/legacy_pyxl_controllers/modal_helper",["jquery"],function(t){var e;return e=function(){function e(){}return e.MODAL_MAX_WIDTH=800,e.centerModal=function(e){var n,i,o;return o=e.width(),n=e.height(),i=n<t(window).height()?{position:"fixed",top:"50%","margin-top":-n/2,left:"50%","margin-left":-o/2}:{position:"absolute",top:t(document).scrollTop()+20,left:"50%","margin-left":-o/2,"margin-top":"0"},e.css(i)},e}()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/legacy_pyxl_controllers/modal_video_player",["jquery","modules/clean/keycode","modules/clean/legacy_pyxl_controllers/modal_helper","modules/clean/analytics"],function(e,n,i,o){var s,r;return r=o.TeamsWebActionsLogger,s=function(){function o(e){this.$root=e,this._playVideo=t(this._playVideo,this),this.href=this.$root.attr("href"),this.$root.on("click",this._playVideo)}return o.prototype._playVideo=function(t){return t.preventDefault(),this.href&&r.log("played_video",{url:this.href}),o.ensureModal(),o.ensureVideo(),o.$video_holder.attr("src",this.href),o.showModal()},o.ensureModal=function(){var t,n;if(!this.$modal_holder)return n='<div id="video-player-modal" class="db-modal-wrapper"> <div class="db-modal-overlay"></div> <div class="db-modal"> <div class="db-modal-box"> <a href="#" class="db-modal-x"></a> <div class="db-modal-content"> </div> </div> </div> </div>',t=e(n),e("body").append(t),this.$modal=t.find(".db-modal"),this.$modal_holder=t,t.find(".db-modal-x").on("click",this.hideModal),t.find(".db-modal-overlay").on("click",this.hideModal),e(document).on("keydown",this.keydownHandler),e(window).on("popstate",this.hideModal).on("resize",this.resizeHandler)},o.ensureVideo=function(){var t;if(!this.$video_player)return t='<iframe id="video-player" allowfullscreen></iframe>',this.$modal_holder.find(".db-modal-content").html(t),this.$video_holder=e("#video-player")},o.showModal=function(){return this.$modal_holder.show(),i.centerModal(this.$modal)},o.hideModal=function(t){return t.preventDefault(),o.$video_holder.remove(),o.$video_holder=void 0,o.$modal_holder.hide()},o.keydownHandler=function(t){return t.keyCode===n.ESC?o.hideModal(t):void 0},o.resizeHandler=function(t){return i.centerModal(o.$modal)},o}()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/sem/base",["jquery","external/underscore","external/modernizr","modules/clean/analytics","modules/core/browser"],function(e,n,i,o,s){var r,a;return a=o.TeamsWebActionsLogger,r=function(){function i(){this.handleScroll=t(this.handleScroll,this),this.$window=e(window),this.handleScrollWrapped=n.throttle(this.handleScroll,33,{leading:!0,trailing:!0}),this.$window.on("scroll",this.handleScrollWrapped),e("a[data-event-name]").click(this.handleEventClick)}return i.prototype.handleScroll=function(){return this.$window.scrollTop()>200?(a.log("scroll_page",{sem:!0,path:location.pathname}),this.$window.off("scroll",this.handleScrollWrapped),delete this.handleScrollWrapped):void 0},i.prototype.handleEventClick=function(t){var n,i,o;return n=e(t.target),o=n.attr("href"),i=n.attr("data-event-name"),o?("#"===o.substr(0,1)&&"#"!==o||t.preventDefault(),a.log(i,{sem:!0,path:location.pathname},function(){return"#"!==o.substr(0,1)?s.redirect(o):void 0})):void 0},i}(),{SEMPage:r}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/sem/business/base",["jquery","external/underscore","external/modernizr","modules/core/browser"],function(e,n,i,o){var s;return s=function(){function o(){this._toggleNavMobile=t(this._toggleNavMobile,this),this._blurDropdownMenu=t(this._blurDropdownMenu,this),this._closeDropdownMenu=t(this._closeDropdownMenu,this),this._openDropdownMenu=t(this._openDropdownMenu,this),this._toggleDropdownMenu=t(this._toggleDropdownMenu,this),this._onScrollHandler=t(this._onScrollHandler,this),this.$window=e(window),this.$nav_list_container=e(".mast-head__nav-list-container"),this.nav_list_items=e(".mast-head__list-item").length,this.$nav_list=e(".mast-head__nav-list"),this.$links=e(".mast-head__text-link"),this.$button_try=e(".mast-head__list-item-try .button-secondary"),this._onScrollHandler(),this.dropdown_mobile_open=!1,this.scrollThreshold=350,this.$window.scroll(n.throttle(this._onScrollHandler,33,{leading:!0,trailing:!0})),e(".mast-head__list-item-children > a").each(function(t){return function(n,i){var o,s;return o=e(i),s=o.hasClass("mast-head__text-link_subnav--hover-trigger"),s?function(){var e,n,s;return"#"===o.attr("href")&&(o.addClass("not-clickable"),o.on("click",function(t){return t.preventDefault()})),e=o.next(),s=null,n=function(e){return s=setTimeout(t._blurDropdownMenu.bind(t,e,i),333)},o.on("mouseenter",function(e){return clearTimeout(s),t._isDropdownMenuOpen(i)?void 0:t._toggleDropdownMenu(e)}),o.on("mouseleave",n),e.on("mouseenter",function(t){return clearTimeout(s)}),e.on("mouseleave",n)}():o.on("click",t._toggleDropdownMenu)}}(this)),e(".mast-head__mobile-nav").on("click",this._toggleNavMobile),this._resizeNav()}return o.prototype._onScrollHandler=function(){return this.$window.scrollTop()>this.scrollThreshold?(this.$nav_list.addClass("scrolled"),this.$links.addClass("scrolled"),this.$button_try.addClass("scrolled")):(this.$links.removeClass("scrolled"),this.$button_try.removeClass("scrolled")),this._closeDropdownMenu(".mast-head__list-sub-items")},o.prototype._resizeNav=function(){var t,o;if(!this.resized)return i.flexbox?void(this.resized=!0):window.outerWidth<768?void this.$window.on("resize",n.debounce(this._resizeNav,100)):(this.$window.off("resize",this._resizeNav),e(".mast-head__list-item").css("max-width",""),o=0,t=[],e(".mast-head__list-item").each(function(){var n,i;return n=e(this),i=n.outerWidth(),o+=i,t.push(function(t){var e;return e=i/t*100,n.css("max-width",e+"%")})}),e.each(t,function(t,e){return e(o)}))},o.prototype._toggleDropdownMenu=function(t){return t.preventDefault(),t.stopPropagation(),e(this).find(".mast-head__list-sub-items").on("click",function(t){return t.stopPropagation()}),this._isDropdownMenuOpen(t.target)?this._closeDropdownMenu(t.target):(this._closeAllDropdownMenus(),this._openDropdownMenu(t.target)),!1},o.prototype._isDropdownMenuOpen=function(t){return e(t).parent().hasClass("show-list-sub-items")},o.prototype._openDropdownMenu=function(t){return e(t).parent().addClass("show-list-sub-items"),e("body").one("click",this._blurDropdownMenu)},o.prototype._closeDropdownMenu=function(t){return e(t).parent().removeClass("show-list-sub-items"),e("body").off("click",this._blurDropdownMenu)},o.prototype._closeAllDropdownMenus=function(){return e(".mast-head__list-item-children.show-list-sub-items").removeClass("show-list-sub-items")},o.prototype._blurDropdownMenu=function(t,n){return 0===e(".mast-head__list-sub-items").has(t.target).length?this._closeDropdownMenu(n||".mast-head__list-sub-items"):void 0},o.prototype._toggleNavMobile=function(t){return t.preventDefault(),this.dropdown_mobile_open?(this.$nav_list_container.css("max-height",""),this.dropdown_mobile_open=!1):1===this.nav_list_items?(this.$nav_list_container.css("max-height",this.$nav_list.outerHeight(!0)),this.dropdown_mobile_open=!0):this.nav_list_items>1?(this.$nav_list_container.css("max-height",2*this.$nav_list.outerHeight(!0)),this.dropdown_mobile_open=!0):void 0},o}(),{Header:s}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/sem/business_copy/components/computer_carousel",["jquery","external/underscore"],function(e,n){var i,o,s;return s=function(){var t,e,n;e=void 0,t=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(e=e,void 0!==t.style[e])return n[e]},o=s(),i=function(){function i(i){this.changeActiveElement=t(this.changeActiveElement,this),this.resizeCarouselHeight=t(this.resizeCarouselHeight,this),this.handleArrowClick=t(this.handleArrowClick,this),this.handleBulletClick=t(this.handleBulletClick,this);var o;this.$window=e(window),this.$carousel=e(i),this.$imageList=this.$carousel.find(".image-list"),this.$imageListLength=this.$carousel.find(".image-item").length,this.$copyList=this.$carousel.find(".copy-list"),this.$copyListLength=this.$carousel.find(".copy-item").length,this.$bulletList=this.$carousel.find(".bullet-list"),this.$bullets=this.$carousel.find(".bullet"),this.currentItem=0,this.gradientMap=["orange","blue","yellow"],e(document).ready(function(){return this.resizeCarouselHeight}),o=n.debounce(this.resizeCarouselHeight,500),this.$window.resize(o),e(".benefits-carousel__arrow",this.$carousel).on("click",this.handleArrowClick),this.$bullets.on("click",function(t){return function(n){return t.handleBulletClick(e(n.target))}}(this))}return i.prototype.handleBulletClick=function(t){var e;return e=t.attr("data-index"),this.changeActiveElement(e)},i.prototype.handleArrowClick=function(t){var n,i;return t.preventDefault(),i=this.$bullets.length,this.currentIndex=Number(e(".active").attr("data-index")),n=this.currentIndex===i-1?0:this.currentIndex+1,this.changeActiveElement(n)},i.prototype.resizeCarouselHeight=function(){var t;return t=0,e(".benefits-carousel__copy-item").each(function(){return e(this).height()>t?t=e(this).height():void 0}),this.$copyList.height(t)},i.prototype.changeActiveElement=function(t){var n,i;return this.currentIndex!==t?(n=!1,i=!1,this.$carousel.find(".active").removeClass("active"),e(".benefits-carousel__copy-item").one(o,function(e){return function(i){var o,s;return"opacity"===i.originalEvent.propertyName&&n===!1?(n=!0,o=t<=e.$copyListLength-1?Math.floor(t/e.$copyListLength*100):0,s="translateX(-"+o+"%)",e.$copyList.css({"-webkit-transform":s,"-ms-transform":s,transform:s}),e.$copyList.find("[data-index="+t+"]").addClass("active")):void 0}}(this)),e(".benefits-carousel__image-item").one(o,function(e){return function(n){var o,s;return"opacity"===n.originalEvent.propertyName&&i===!1?(i=!0,o=t<=e.$imageListLength-1?Math.floor(t/e.$imageListLength*100):0,s="translateX(-"+o+"%)",e.$imageList.css({"-webkit-transform":s,"-ms-transform":s,transform:s}),e.$imageList.find("[data-index="+t+"]").addClass("active")):void 0}}(this)),e(".benefits-carousel__gradient").removeClass("benefits-carousel__gradient--"+this.gradientMap[this.currentIndex]),e(".benefits-carousel__gradient").addClass("benefits-carousel__gradient--"+this.gradientMap[t]),this.$bulletList.find("[data-index="+t+"]").addClass("active"),this.currentItem=t):void 0},i}()})}.call(this),function(){define("modules/clean/sem/business_copy/components/snap_engage_link",["jquery","modules/clean/snapengage"],function(t,e){var n;return n=function(){function t(t,e){this.$root=t,this.options=e,this.$root.on("click",function(t){return function(e){return t._snapLinkClicked(e,t.options.chatType)}}(this))}return t.prototype._snapLinkClicked=function(t,n){return t.preventDefault(),"support"===n?e.DropboxSnapEngage.startSupportChat():e.DropboxSnapEngage.startReactiveChat()},t}()})}.call(this),
function(){define("modules/clean/snapengage",["jquery","external/underscore","modules/clean/analytics"],function(t,e,n){var i,o,s;return s=n.TeamsWebActionsLogger,i=function(){function e(){}return e.chatRequested=!1,e.chatData={},e.SNAPENGAGE_IFRAME_ORIGIN=null,e.loaded=!1,e.init=function(t,n,i,o,s,r,a,l,c,h,u){var d,g;return null==c&&(c=!0),null==h&&(h=null),null==u&&(u=null),this.SNAPENGAGE_IFRAME_ORIGIN=s,this.chatRequested=!1,this.chatData={FirstName:t,LastName:n,Email:i,SessionID:o,Country:r,MktoInfo:a,pricing:this.chatData.pricing,user_id:l,proactiveMessage:"",proactiveAgentName:"",visitorFirstTimeVisitor:"",visitorAmountOfPreviousChats:"",visitorAmountOfPagesVisited:"",visitorTimeOnSite:"",visitorTimeOnPage:""},e.shownPricing(u),g=e.getIframeURL(),d=e.createIframe(g),window.addEventListener("message",e.receiveMessage,!1),d.addEventListener("load",function(t){return function(){return t.loaded=!0,e.sendMessage({message_type:"createSnapEngageScript",chatId:h,allowProactiveChat:c,chatData:t.chatData})}}(this)),setInterval(function(t){return function(){return e.checkChatStatus(t.chatData,t.chatRequested,null!=h)}}(this),13e4)},e.createIframe=function(t){var e;return e=document.createElement("iframe"),e.src=t,e.setAttribute("sandbox","allow-scripts allow-same-origin allow-popups"),e.setAttribute("class","snapengage-iframe"),e.setAttribute("id","snapengage-iframe"),e.setAttribute("allowTransparency","true"),document.body.insertBefore(e,document.body.childNodes[0]),e},e.checkChatStatus=function(t,n,i){return null==i&&(i=!1),n?void 0:e.sendMessage({message_type:"checkChatStatus",chatData:t,isSupport:i})},e.getIframeURL=function(){var t;return t=this.SNAPENGAGE_IFRAME_ORIGIN,t+window.location.pathname+window.location.search},e.updateChatStatus=function(e){return t("[data-snap-engage-visibility]").hide(),e?t('[data-snap-engage-visibility="online"]').show():t('[data-snap-engage-visibility="offline"]').show()},e.startReactiveChat=function(){return this.chatRequested?void 0:(this.chatRequested=!0,s.log("chat_initiated"),e.showSnapEngageIframe(),e.sendMessage({message_type:"StartChat",chatData:this.chatData}))},e.startSupportChat=function(){return this.chatRequested=!0,e.showSnapEngageIframe(),s.log("support_chat_initiated"),e.sendMessage({message_type:"startSupportChat",chatData:this.chatData})},e.getSnapEngageIframe=function(){return document.getElementById("snapengage-iframe")},e.sendMessage=function(t){var n;return n=e.getSnapEngageIframe().contentWindow,n.postMessage(t,this.SNAPENGAGE_IFRAME_ORIGIN)},e.closeChat=function(t,n){return e.hideSnapEngageIframe(),this.chatRequested=!1},e.chatMessageReceived=function(t){return e.showSnapEngageIframe()},e.logStartChat=function(t,e,n){return"proactive"===n?s.log("proactive_chat_initiated"):"manual"===n?s.log("reactive_chat_initiated"):void 0},e.openProactiveChat=function(t,n){return this.chatRequested=!0,e.showSnapEngageIframe(),s.log("proactive_chat_opened")},e.hideSnapEngageIframe=function(){return t(e.getSnapEngageIframe()).hide()},e.showSnapEngageIframe=function(){return t(e.getSnapEngageIframe()).show()},e.shownPricing=function(t){var n,i,s;if(null!=t?t[0]:void 0)try{if(s=t.map(function(t){var e,n,i,s,r,a,l;return l=t.product,e=t.country,a=t.price_version,r=t.price,i=t.licenses,n=l+" "+e+"v"+a+" "+r,s=o.get_number_of_licenses(i),s&&(n+=1===s?" (1 license)":" ("+s+" licenses_count)"),n}),this.chatData.pricing=s.join(),e.loaded)return e.sendMessage({message_type:"checkChatStatus",chatData:this.chatData,isSupport:null!=this.support_chat_id})}catch(t){return n=t,null}},e.receiveMessage=function(t){var n;if(e.validOriginURL(t.origin))switch(n=t.data,n.message_type){case"Close":return e.closeChat(n.type,n.agent_status);case"ChatMessageReceived":return e.chatMessageReceived();case"Open":return this.chatRequested=!0,e.showSnapEngageIframe(),e.updateChatStatus(!0);case"OpenProactive":return e.openProactiveChat(n.agent,n.msg);case"StartChat":return e.logStartChat(n.email,n.msg,n.type);case"UpdateChatStatus":return e.updateChatStatus(n.online)}},e.validOriginURL=function(t){return t===this.SNAPENGAGE_IFRAME_ORIGIN},e}(),o=function(){function t(){}var n,i,o;return n={},o=function(t){var e;return e=i(t),null!=e&&"OFF"!==e},i=function(t){return n.hasOwnProperty(t)?n[t]:null},t.register=function(t){return n=e.extend(n,t)},t.get_number_of_licenses=function(t){switch(i("subgrowth_biz_payment_no_min_license")){case"MIN2":return 2;case"MIN3":return 3;case"MIN3B":return 3;default:return t}},t}(),{DropboxSnapEngage:i,DropboxSnapEngageExperiments:o}})}.call(this),function(){define("modules/dirty/payments/payment_plans_page",["jquery","dropbox"],function(t,e){var n,i;return n=e.Forms,i=function(){function e(){this._init_listeners()}return e.prototype._init_listeners=function(){return t(".resubscribe-to-pro-cta").click(function(t){return t.preventDefault(),n.postRequest("/resubscribe")})},e}()})}.call(this);
//# sourceMappingURL=pkg-av.min.js-vfllfDfzY.map